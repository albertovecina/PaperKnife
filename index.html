<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Paper Knife by albertovecina</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Paper Knife</h1>
      <h2 class="project-tagline">Decoupler tool for Android Adapters</h2>
      <a href="https://github.com/albertovecina/PaperKnife" class="btn">View on GitHub</a>
      <a href="https://github.com/albertovecina/PaperKnife/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/albertovecina/PaperKnife/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="paper-knife" class="anchor" href="#paper-knife" aria-hidden="true"><span class="octicon octicon-link"></span></a>Paper Knife</h1>

<p><strong>Decoupler tool for Android Adapters</strong></p>

<h2>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h2>

<ol>
<li>
<p>Make your model object to implements CellElement interface</p>

<pre><code>public class Item implements CellElement {
}
</code></pre>
</li>
<li>
<p>Implements a class to handle the row views (a view holder) and implements the CellViewHolder interface</p>

<pre><code>private static class ViewHolder implements CellViewHolder {
} 
</code></pre>
</li>
<li>
<p>Implements methods in your CellViewHolder to manage the views, and mark them as data targets with the annotation DataTarget and providing an id</p>

<pre><code>@DataTarget("Title")
public void setTitle(String title) {
   mTextViewTitle.setText(title);
}
</code></pre>
</li>
<li>
<p>Implements a cell provider. The cell provider the information source to populate de DataTarget methods. Implements the CellProvider interface and annotate your source methods sharing the DataTarget id to make the data mapping. The cell provider methods receives an instance of your model as a paramenter.</p>

<pre><code>public class SamplePresenterImpl implements SamplePresenter, CellProvider {

    ...
    @DataSource("Check")
    public boolean isOnFavouritesList(Item item) {
        return mInteractor.getFavouritesList().contains(item);
    }
    ...

}
</code></pre>
</li>
<li>
<p>[OPTIONAL] Implementes a listener provider. The listener provider is a class resposible to create listeners for every view in your row. 
To create a listener provider you need to follow this steps:</p>

<ol>
<li>
<p>Implementes the CellListenerProvider interface and mark your provider methods with the ListenerSource Annotation. The ListenerSource annotated methods must receive a CellElement as a parameter.</p>

<pre><code>public class SampleActivity extends Activity implements SampleView, CellListenerProvider {

    @ListenerSource("CheckBox")
    public OnCheckedChangeListener provideCheckBoxListener(final CellElement cellElement) {
        return new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                mPresenter.onCheckChange(cellElement, isChecked);
            }
        };
    }

    @ListenerSource("Title")
    public View.OnClickListener provideOnClickListener(final CellElement cellElement) {
        return new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mPresenter.onCheckChange(cellElement, true);
            }
        };
    }

}
</code></pre>
</li>
<li>
<p>Mark your target views with the annotation ListenerTarget. This views will receive the listener provided by yout CellListenerProvider.</p>

<pre><code>private static class ViewHolder implements CellViewHolder {

    @ListenerTarget("Title")
    public TextView mTextViewTitle;
    @ListenerTarget("CheckBox")
    public CheckBox mCheckBox;
    ...

}
</code></pre>
</li>
</ol>
</li>
<li>
<p>Execute the data mapping in your getView method</p>

<pre><code>@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ...
    PaperKnife.map(mList.get(position))
                    .dataProvider(mCellDataProvider)
                    .listenerProvider(mCellListenerProvider)
                    .into(viewHolder);
    return convertView;
}
</code></pre>
</li>
</ol>

<h2>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download</h2>

<p>GRADLE</p>

<pre><code>compile 'com.vsa:paperknife:1.0'
</code></pre>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<pre><code>Copyright 2013 Alberto Vecina

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/albertovecina/PaperKnife">Paper Knife</a> is maintained by <a href="https://github.com/albertovecina">albertovecina</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
